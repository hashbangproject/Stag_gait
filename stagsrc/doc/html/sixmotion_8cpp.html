<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>stag_doc: sixmotion.cpp File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">stag_doc
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">sixmotion.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="sixmotion_8h_source.html">sixmotion.h</a>&quot;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for sixmotion.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="sixmotion_8cpp__incl.png" border="0" usemap="#sixmotion_8cpp" alt=""/></div>
<map name="sixmotion_8cpp" id="sixmotion_8cpp">
<area shape="rect" id="node3" href="sixmotion_8h.html" title="sixmotion.h" alt="" coords="233,83,321,112"/></map>
</div>
</div>
<p><a href="sixmotion_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sixmotion_8cpp.html#ad162a18cbea44b0c9ec3850c8d019bd2">LED_PERMANENT</a>&#160;&#160;&#160;0xff, 0x27, 0x10, 0x00, 0x32</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sixmotion_8cpp.html#a6da3937db21f72a0fa8f99e986ada1ab">be_memcpy</a> (const void *destination, const void *source, uint8_t size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sixmotion_8cpp.html#a51246b75ffb66b5c4754e519c2d5b017">fatal</a> (char *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sixmotion_8cpp.html#a26eaf24eb5981f016d8c0f74e07bd6e5">l2cap_listen</a> (unsigned short psm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="sixmotion_8h.html#structmotion__dev">motion_dev</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sixmotion_8cpp.html#a2e8b2ef23f6f19bdcbc99292811bce86">accept_device</a> (int csk, int isk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sixmotion_8cpp.html#a2c84a0aa7176a9dba9a18091317d95fb">hidp_trans</a> (int csk, int isk, const char *buf, int len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sixmotion_8cpp.html#a97e99c754a15c170af9554c0022860a3">setup_device</a> (struct <a class="el" href="sixmotion_8h.html#structmotion__dev">motion_dev</a> *dev)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sixmotion_8cpp.html#a2ad176b48e77001d4400a403baf9035d">parse_raw</a> (<a class="el" href="sixmotion_8h.html#struct__sixmotion__hidraw">_sixmotion_hidraw</a> &amp;raw, <a class="el" href="sixmotion_8h.html#struct__sixmotion">_sixmotion</a> &amp;sixm)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sixmotion_8cpp.html#a2079b5d79e8f77f6b0f0e11101d9b239">force_sixaxis</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sixmotion_8cpp.html#a3339f7bea98569e0c20c28e9d69e6f42">force_ds3</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sixmotion_8cpp.html#aa434daa60aff3350306abb5bda360060">timestamp</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sixmotion_8cpp.html#a5207b66bcfd62cc1455434d400eac417">nostdin</a> = 0</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ad162a18cbea44b0c9ec3850c8d019bd2"></a><!-- doxytag: member="sixmotion.cpp::LED_PERMANENT" ref="ad162a18cbea44b0c9ec3850c8d019bd2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="sixmotion_8cpp.html#ad162a18cbea44b0c9ec3850c8d019bd2">LED_PERMANENT</a>&#160;&#160;&#160;0xff, 0x27, 0x10, 0x00, 0x32</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="sixmotion_8cpp_source.html#l00088">setup_device()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a2e8b2ef23f6f19bdcbc99292811bce86"></a><!-- doxytag: member="sixmotion.cpp::accept_device" ref="a2e8b2ef23f6f19bdcbc99292811bce86" args="(int csk, int isk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="sixmotion_8h.html#structmotion__dev">motion_dev</a>* <a class="el" href="sixmotion_8cpp.html#a2e8b2ef23f6f19bdcbc99292811bce86">accept_device</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>csk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>isk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sixmotion_8cpp_source.html#l00047">47</a> of file <a class="el" href="sixmotion_8cpp_source.html">sixmotion.cpp</a>.</p>

<p>References <a class="el" href="sixmotion_8h_source.html#l00137">motion_dev::addr</a>, <a class="el" href="sixmotion_8h_source.html#l00140">motion_dev::csk</a>, <a class="el" href="sixmotion_8h_source.html#l00030">DS3</a>, <a class="el" href="sixmotion_8cpp_source.html#l00020">fatal()</a>, <a class="el" href="sixmotion_8cpp_source.html#l00011">force_ds3</a>, <a class="el" href="sixmotion_8cpp_source.html#l00010">force_sixaxis</a>, <a class="el" href="sixmotion_8h_source.html#l00026">HIDP_DATA_RTYPE_FEATURE</a>, <a class="el" href="sixmotion_8h_source.html#l00022">HIDP_TRANS_GET_REPORT</a>, <a class="el" href="sixmotion_8h_source.html#l00141">motion_dev::isk</a>, <a class="el" href="sixmotion_8h_source.html#l00028">PSMOVE</a>, <a class="el" href="sixmotion_8h_source.html#l00029">SIXAXIS</a>, and <a class="el" href="sixmotion_8h_source.html#l00139">motion_dev::type</a>.</p>

<p>Referenced by <a class="el" href="sixmotion_8cpp_source.html#l00235">sixmotion::readEv()</a>.</p>
<div class="fragment"><pre class="fragment">                                                   {
    fprintf(stderr, <span class="stringliteral">&quot;Incoming connection...\n&quot;</span>);
    <span class="keyword">struct </span><a class="code" href="sixmotion_8h.html#structmotion__dev">motion_dev</a> *dev = (<a class="code" href="sixmotion_8h.html#structmotion__dev">motion_dev</a>*) malloc(<span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="sixmotion_8h.html#structmotion__dev">motion_dev</a>));
    <span class="keywordflow">if</span> (!dev) <a class="code" href="sixmotion_8cpp.html#a51246b75ffb66b5c4754e519c2d5b017">fatal</a>(<span class="stringliteral">&quot;malloc&quot;</span>);

    dev-&gt;<a class="code" href="sixmotion_8h.html#a01f12eac017c636823d82936d2c5f4e2">csk</a> = accept(<a class="code" href="sixmotion_8h.html#a01f12eac017c636823d82936d2c5f4e2">csk</a>, NULL, NULL);
    <span class="keywordflow">if</span> (dev-&gt;<a class="code" href="sixmotion_8h.html#a01f12eac017c636823d82936d2c5f4e2">csk</a> &lt; 0) <a class="code" href="sixmotion_8cpp.html#a51246b75ffb66b5c4754e519c2d5b017">fatal</a>(<span class="stringliteral">&quot;accept(CTRL)&quot;</span>);
    dev-&gt;<a class="code" href="sixmotion_8h.html#acf007a9789b940bc8998ffda607429d6">isk</a> = accept(<a class="code" href="sixmotion_8h.html#acf007a9789b940bc8998ffda607429d6">isk</a>, NULL, NULL);
    <span class="keywordflow">if</span> (dev-&gt;<a class="code" href="sixmotion_8h.html#acf007a9789b940bc8998ffda607429d6">isk</a> &lt; 0) <a class="code" href="sixmotion_8cpp.html#a51246b75ffb66b5c4754e519c2d5b017">fatal</a>(<span class="stringliteral">&quot;accept(INTR)&quot;</span>);

    <span class="keyword">struct </span>sockaddr_l2 addr;
    socklen_t addrlen = <span class="keyword">sizeof</span> (addr);
    <span class="keywordflow">if</span> (getpeername(dev-&gt;<a class="code" href="sixmotion_8h.html#acf007a9789b940bc8998ffda607429d6">isk</a>, (<span class="keyword">struct</span> sockaddr *) &amp;addr, &amp;addrlen) &lt; 0)
        <a class="code" href="sixmotion_8cpp.html#a51246b75ffb66b5c4754e519c2d5b017">fatal</a>(<span class="stringliteral">&quot;getpeername&quot;</span>);
    dev-&gt;<a class="code" href="sixmotion_8h.html#a130c5b9477c0e50e690465ccf9c1c2da">addr</a> = addr.l2_bdaddr;

    {
        <span class="comment">// Distinguish SIXAXIS / DS3 / PSMOVE.</span>
        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> resp[64];
        <span class="keywordtype">char</span> get03f2[] = {<a class="code" href="sixmotion_8h.html#a88d78a05a618e66cc0f82296eab32c40">HIDP_TRANS_GET_REPORT</a> | <a class="code" href="sixmotion_8h.html#a9a7c854bdf42f123baf1fe722600eda3">HIDP_DATA_RTYPE_FEATURE</a> | 8,
            0xf2, <span class="keyword">sizeof</span> (resp), <span class="keyword">sizeof</span> (resp) &gt;&gt; 8};
        send(dev-&gt;<a class="code" href="sixmotion_8h.html#a01f12eac017c636823d82936d2c5f4e2">csk</a>, get03f2, sizeof (get03f2), 0); <span class="comment">// 0301 is interesting too.</span>
        <span class="keywordtype">int</span> nr = recv(dev-&gt;<a class="code" href="sixmotion_8h.html#a01f12eac017c636823d82936d2c5f4e2">csk</a>, resp, sizeof (resp), 0);
        <span class="keywordflow">if</span> (nr &lt; 19) dev-&gt;<a class="code" href="sixmotion_8h.html#ae34d0afad57067fc41f8b028e9f08afd">type</a> = <a class="code" href="sixmotion_8h.html#affbef8d51e7672d207cf32709b023df5">PSMOVE</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="sixmotion_8cpp.html#a2079b5d79e8f77f6b0f0e11101d9b239">force_sixaxis</a>) dev-&gt;<a class="code" href="sixmotion_8h.html#ae34d0afad57067fc41f8b028e9f08afd">type</a> = <a class="code" href="sixmotion_8h.html#aee4ee20b1b302b459839f2b7df3e9ab4">SIXAXIS</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="sixmotion_8cpp.html#a3339f7bea98569e0c20c28e9d69e6f42">force_ds3</a>) dev-&gt;<a class="code" href="sixmotion_8h.html#ae34d0afad57067fc41f8b028e9f08afd">type</a> = <a class="code" href="sixmotion_8h.html#abb2543c6b8c507a9034ce65b83a7f464">DS3</a>;
        <span class="keywordflow">else</span> dev-&gt;<a class="code" href="sixmotion_8h.html#ae34d0afad57067fc41f8b028e9f08afd">type</a> = (resp[13] == 0x40) ? <a class="code" href="sixmotion_8h.html#aee4ee20b1b302b459839f2b7df3e9ab4">SIXAXIS</a> : <a class="code" href="sixmotion_8h.html#abb2543c6b8c507a9034ce65b83a7f464">DS3</a>; <span class="comment">// My guess.</span>
    }

    <span class="keywordflow">return</span> dev;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sixmotion_8cpp_a2e8b2ef23f6f19bdcbc99292811bce86_cgraph.png" border="0" usemap="#sixmotion_8cpp_a2e8b2ef23f6f19bdcbc99292811bce86_cgraph" alt=""/></div>
<map name="sixmotion_8cpp_a2e8b2ef23f6f19bdcbc99292811bce86_cgraph" id="sixmotion_8cpp_a2e8b2ef23f6f19bdcbc99292811bce86_cgraph">
<area shape="rect" id="node3" href="sixmotion_8cpp.html#a51246b75ffb66b5c4754e519c2d5b017" title="fatal" alt="" coords="161,5,207,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sixmotion_8cpp_a2e8b2ef23f6f19bdcbc99292811bce86_icgraph.png" border="0" usemap="#sixmotion_8cpp_a2e8b2ef23f6f19bdcbc99292811bce86_icgraph" alt=""/></div>
<map name="sixmotion_8cpp_a2e8b2ef23f6f19bdcbc99292811bce86_icgraph" id="sixmotion_8cpp_a2e8b2ef23f6f19bdcbc99292811bce86_icgraph">
<area shape="rect" id="node3" href="classsixmotion.html#a1e7228e96e52638bf794a12cc323ca16" title="sixmotion::readEv" alt="" coords="161,5,287,35"/><area shape="rect" id="node5" href="classsixmotion.html#a48ededdf89bcc3dc4c3ae03db34a14bc" title="sixmotion::loop" alt="" coords="337,5,447,35"/><area shape="rect" id="node7" href="classsixmotion.html#a2346d9e25b866fa40e60d897be1f5cba" title="sixmotion::sixmotion" alt="" coords="497,5,639,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6da3937db21f72a0fa8f99e986ada1ab"></a><!-- doxytag: member="sixmotion.cpp::be_memcpy" ref="a6da3937db21f72a0fa8f99e986ada1ab" args="(const void *destination, const void *source, uint8_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="sixmotion_8cpp.html#a6da3937db21f72a0fa8f99e986ada1ab">be_memcpy</a> </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>destination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sixmotion_8cpp_source.html#l00015">15</a> of file <a class="el" href="sixmotion_8cpp_source.html">sixmotion.cpp</a>.</p>

<p>Referenced by <a class="el" href="sixmotion_8cpp_source.html#l00142">parse_raw()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                          {
    uint8_t copy_count = 0;
    <span class="keywordflow">while</span> (size) ((uint8_t *) destination)[copy_count++] = ((uint8_t *) source)[--size];
}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sixmotion_8cpp_a6da3937db21f72a0fa8f99e986ada1ab_icgraph.png" border="0" usemap="#sixmotion_8cpp_a6da3937db21f72a0fa8f99e986ada1ab_icgraph" alt=""/></div>
<map name="sixmotion_8cpp_a6da3937db21f72a0fa8f99e986ada1ab_icgraph" id="sixmotion_8cpp_a6da3937db21f72a0fa8f99e986ada1ab_icgraph">
<area shape="rect" id="node3" href="sixmotion_8cpp.html#a2ad176b48e77001d4400a403baf9035d" title="parse_raw" alt="" coords="147,5,229,35"/><area shape="rect" id="node5" href="classsixmotion.html#a1e7228e96e52638bf794a12cc323ca16" title="sixmotion::readEv" alt="" coords="279,5,404,35"/><area shape="rect" id="node7" href="classsixmotion.html#a48ededdf89bcc3dc4c3ae03db34a14bc" title="sixmotion::loop" alt="" coords="455,5,564,35"/><area shape="rect" id="node9" href="classsixmotion.html#a2346d9e25b866fa40e60d897be1f5cba" title="sixmotion::sixmotion" alt="" coords="615,5,756,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a51246b75ffb66b5c4754e519c2d5b017"></a><!-- doxytag: member="sixmotion.cpp::fatal" ref="a51246b75ffb66b5c4754e519c2d5b017" args="(char *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="sixmotion_8cpp.html#a51246b75ffb66b5c4754e519c2d5b017">fatal</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sixmotion_8cpp_source.html#l00020">20</a> of file <a class="el" href="sixmotion_8cpp_source.html">sixmotion.cpp</a>.</p>

<p>Referenced by <a class="el" href="sixmotion_8cpp_source.html#l00047">accept_device()</a>, <a class="el" href="sixmotion_8cpp_source.html#l00079">hidp_trans()</a>, <a class="el" href="sixmotion_8cpp_source.html#l00026">l2cap_listen()</a>, and <a class="el" href="sixmotion_8cpp_source.html#l00235">sixmotion::readEv()</a>.</p>
<div class="fragment"><pre class="fragment">                      {
    <span class="keywordflow">if</span> (errno) perror(msg);
    <span class="keywordflow">else</span> fprintf(stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, msg);
    exit(1);
}
</pre></div>
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sixmotion_8cpp_a51246b75ffb66b5c4754e519c2d5b017_icgraph.png" border="0" usemap="#sixmotion_8cpp_a51246b75ffb66b5c4754e519c2d5b017_icgraph" alt=""/></div>
<map name="sixmotion_8cpp_a51246b75ffb66b5c4754e519c2d5b017_icgraph" id="sixmotion_8cpp_a51246b75ffb66b5c4754e519c2d5b017_icgraph">
<area shape="rect" id="node3" href="sixmotion_8cpp.html#a2e8b2ef23f6f19bdcbc99292811bce86" title="accept_device" alt="" coords="232,5,339,35"/><area shape="rect" id="node5" href="classsixmotion.html#a1e7228e96e52638bf794a12cc323ca16" title="sixmotion::readEv" alt="" coords="388,71,513,100"/><area shape="rect" id="node11" href="sixmotion_8cpp.html#a2c84a0aa7176a9dba9a18091317d95fb" title="hidp_trans" alt="" coords="101,109,184,139"/><area shape="rect" id="node16" href="sixmotion_8cpp.html#a26eaf24eb5981f016d8c0f74e07bd6e5" title="l2cap_listen" alt="" coords="405,136,496,165"/><area shape="rect" id="node7" href="classsixmotion.html#a48ededdf89bcc3dc4c3ae03db34a14bc" title="sixmotion::loop" alt="" coords="564,75,673,104"/><area shape="rect" id="node9" href="classsixmotion.html#a2346d9e25b866fa40e60d897be1f5cba" title="sixmotion::sixmotion" alt="" coords="724,103,865,132"/><area shape="rect" id="node13" href="sixmotion_8cpp.html#a97e99c754a15c170af9554c0022860a3" title="setup_device" alt="" coords="236,109,335,139"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2c84a0aa7176a9dba9a18091317d95fb"></a><!-- doxytag: member="sixmotion.cpp::hidp_trans" ref="a2c84a0aa7176a9dba9a18091317d95fb" args="(int csk, int isk, const char *buf, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="sixmotion_8cpp.html#a2c84a0aa7176a9dba9a18091317d95fb">hidp_trans</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>csk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>isk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sixmotion_8cpp_source.html#l00079">79</a> of file <a class="el" href="sixmotion_8cpp_source.html">sixmotion.cpp</a>.</p>

<p>References <a class="el" href="sixmotion_8cpp_source.html#l00020">fatal()</a>.</p>

<p>Referenced by <a class="el" href="sixmotion_8cpp_source.html#l00088">setup_device()</a>.</p>
<div class="fragment"><pre class="fragment">                                                            {

    <span class="keywordflow">if</span> (send(csk, buf, len, 0) != len) <a class="code" href="sixmotion_8cpp.html#a51246b75ffb66b5c4754e519c2d5b017">fatal</a>(<span class="stringliteral">&quot;send(CTRL)&quot;</span>);
    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ack;
    <span class="keywordtype">int</span> nr = recv(csk, &amp;ack, <span class="keyword">sizeof</span> (ack), 0);
    <span class="comment">//int nr = recv(csk, &amp;ack, sizeof (ack), MSG_DONTWAIT);//THIS no longer in same thread needs to be looked at</span>
    <span class="comment">//if (nr != 1 || ack != 0) fatal(&quot;ack&quot;);</span>
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sixmotion_8cpp_a2c84a0aa7176a9dba9a18091317d95fb_cgraph.png" border="0" usemap="#sixmotion_8cpp_a2c84a0aa7176a9dba9a18091317d95fb_cgraph" alt=""/></div>
<map name="sixmotion_8cpp_a2c84a0aa7176a9dba9a18091317d95fb_cgraph" id="sixmotion_8cpp_a2c84a0aa7176a9dba9a18091317d95fb_cgraph">
<area shape="rect" id="node3" href="sixmotion_8cpp.html#a51246b75ffb66b5c4754e519c2d5b017" title="fatal" alt="" coords="137,5,183,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sixmotion_8cpp_a2c84a0aa7176a9dba9a18091317d95fb_icgraph.png" border="0" usemap="#sixmotion_8cpp_a2c84a0aa7176a9dba9a18091317d95fb_icgraph" alt=""/></div>
<map name="sixmotion_8cpp_a2c84a0aa7176a9dba9a18091317d95fb_icgraph" id="sixmotion_8cpp_a2c84a0aa7176a9dba9a18091317d95fb_icgraph">
<area shape="rect" id="node3" href="sixmotion_8cpp.html#a97e99c754a15c170af9554c0022860a3" title="setup_device" alt="" coords="136,5,235,35"/><area shape="rect" id="node5" href="classsixmotion.html#a1e7228e96e52638bf794a12cc323ca16" title="sixmotion::readEv" alt="" coords="284,5,409,35"/><area shape="rect" id="node7" href="classsixmotion.html#a48ededdf89bcc3dc4c3ae03db34a14bc" title="sixmotion::loop" alt="" coords="460,5,569,35"/><area shape="rect" id="node9" href="classsixmotion.html#a2346d9e25b866fa40e60d897be1f5cba" title="sixmotion::sixmotion" alt="" coords="620,5,761,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a26eaf24eb5981f016d8c0f74e07bd6e5"></a><!-- doxytag: member="sixmotion.cpp::l2cap_listen" ref="a26eaf24eb5981f016d8c0f74e07bd6e5" args="(unsigned short psm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="sixmotion_8cpp.html#a26eaf24eb5981f016d8c0f74e07bd6e5">l2cap_listen</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>psm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sixmotion_8cpp_source.html#l00026">26</a> of file <a class="el" href="sixmotion_8cpp_source.html">sixmotion.cpp</a>.</p>

<p>References <a class="el" href="sixmotion_8cpp_source.html#l00020">fatal()</a>.</p>

<p>Referenced by <a class="el" href="sixmotion_8cpp_source.html#l00199">sixmotion::sixmotion()</a>.</p>
<div class="fragment"><pre class="fragment">                                     {
    <span class="keywordtype">int</span> sk = socket(PF_BLUETOOTH, SOCK_SEQPACKET, BTPROTO_L2CAP);
    <span class="keywordflow">if</span> (sk &lt; 0) <a class="code" href="sixmotion_8cpp.html#a51246b75ffb66b5c4754e519c2d5b017">fatal</a>(<span class="stringliteral">&quot;socket&quot;</span>);

    <span class="keyword">struct </span>sockaddr_l2 addr;
    memset(&amp;addr, 0, <span class="keyword">sizeof</span> (addr));
    addr.l2_family = AF_BLUETOOTH;
    addr.l2_bdaddr = {
        {0, 0, 0, 0, 0, 0}
    };
    addr.l2_psm = htobs(psm);
    <span class="keywordflow">if</span> (bind(sk, (<span class="keyword">struct</span> sockaddr *) &amp;addr, <span class="keyword">sizeof</span> (addr)) &lt; 0) {
        perror(<span class="stringliteral">&quot;bind&quot;</span>);
        close(sk);
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">if</span> (listen(sk, 5) &lt; 0) <a class="code" href="sixmotion_8cpp.html#a51246b75ffb66b5c4754e519c2d5b017">fatal</a>(<span class="stringliteral">&quot;listen&quot;</span>);
    <span class="keywordflow">return</span> sk;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sixmotion_8cpp_a26eaf24eb5981f016d8c0f74e07bd6e5_cgraph.png" border="0" usemap="#sixmotion_8cpp_a26eaf24eb5981f016d8c0f74e07bd6e5_cgraph" alt=""/></div>
<map name="sixmotion_8cpp_a26eaf24eb5981f016d8c0f74e07bd6e5_cgraph" id="sixmotion_8cpp_a26eaf24eb5981f016d8c0f74e07bd6e5_cgraph">
<area shape="rect" id="node3" href="sixmotion_8cpp.html#a51246b75ffb66b5c4754e519c2d5b017" title="fatal" alt="" coords="145,5,191,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sixmotion_8cpp_a26eaf24eb5981f016d8c0f74e07bd6e5_icgraph.png" border="0" usemap="#sixmotion_8cpp_a26eaf24eb5981f016d8c0f74e07bd6e5_icgraph" alt=""/></div>
<map name="sixmotion_8cpp_a26eaf24eb5981f016d8c0f74e07bd6e5_icgraph" id="sixmotion_8cpp_a26eaf24eb5981f016d8c0f74e07bd6e5_icgraph">
<area shape="rect" id="node3" href="classsixmotion.html#a2346d9e25b866fa40e60d897be1f5cba" title="sixmotion::sixmotion" alt="" coords="145,5,287,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2ad176b48e77001d4400a403baf9035d"></a><!-- doxytag: member="sixmotion.cpp::parse_raw" ref="a2ad176b48e77001d4400a403baf9035d" args="(_sixmotion_hidraw &amp;raw, _sixmotion &amp;sixm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="sixmotion_8cpp.html#a2ad176b48e77001d4400a403baf9035d">parse_raw</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sixmotion_8h.html#struct__sixmotion__hidraw">_sixmotion_hidraw</a> &amp;&#160;</td>
          <td class="paramname"><em>raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sixmotion_8h.html#struct__sixmotion">_sixmotion</a> &amp;&#160;</td>
          <td class="paramname"><em>sixm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sixmotion_8cpp_source.html#l00142">142</a> of file <a class="el" href="sixmotion_8cpp_source.html">sixmotion.cpp</a>.</p>

<p>References <a class="el" href="sixmotion_8h_source.html#l00083">_sixmotion_hidraw::ax</a>, <a class="el" href="sixmotion_8h_source.html#l00128">_sixmotion::aX</a>, <a class="el" href="sixmotion_8h_source.html#l00085">_sixmotion_hidraw::ay</a>, <a class="el" href="sixmotion_8h_source.html#l00129">_sixmotion::aY</a>, <a class="el" href="sixmotion_8h_source.html#l00086">_sixmotion_hidraw::az</a>, <a class="el" href="sixmotion_8h_source.html#l00130">_sixmotion::aZ</a>, <a class="el" href="sixmotion_8cpp_source.html#l00015">be_memcpy()</a>, <a class="el" href="sixmotion_8h_source.html#l00087">_sixmotion_hidraw::gz</a>, <a class="el" href="sixmotion_8h_source.html#l00131">_sixmotion::gZ</a>, <a class="el" href="sixmotion_8h_source.html#l00119">_sixmotion::L3_mag</a>, <a class="el" href="sixmotion_8h_source.html#l00044">_sixmotion_hidraw::L3_x</a>, <a class="el" href="sixmotion_8h_source.html#l00117">_sixmotion::L3_x</a>, <a class="el" href="sixmotion_8h_source.html#l00045">_sixmotion_hidraw::L3_y</a>, <a class="el" href="sixmotion_8h_source.html#l00118">_sixmotion::L3_y</a>, <a class="el" href="sixmotion_8h_source.html#l00125">_sixmotion::R3_mag</a>, <a class="el" href="sixmotion_8h_source.html#l00047">_sixmotion_hidraw::R3_x</a>, <a class="el" href="sixmotion_8h_source.html#l00123">_sixmotion::R3_x</a>, <a class="el" href="sixmotion_8h_source.html#l00048">_sixmotion_hidraw::R3_y</a>, and <a class="el" href="sixmotion_8h_source.html#l00124">_sixmotion::R3_y</a>.</p>

<p>Referenced by <a class="el" href="sixmotion_8cpp_source.html#l00235">sixmotion::readEv()</a>.</p>
<div class="fragment"><pre class="fragment">                                                         {

    sixm.<a class="code" href="sixmotion_8h.html#aa3b9e00340b929765ee0905fb571cb61">L3_x</a> = -128.0f + (float) raw.<a class="code" href="sixmotion_8h.html#a708ce688cc3d3641abf5a061d11a96b7">L3_x</a>;
    sixm.<a class="code" href="sixmotion_8h.html#a29c9d52145269baf6711fcea2b935f6f">L3_y</a> = 128.0f - (<span class="keywordtype">float</span>) raw.<a class="code" href="sixmotion_8h.html#adc2fd0b3910c0bcd32f2401302d8296e">L3_y</a>;
    sixm.<a class="code" href="sixmotion_8h.html#aab31a897c5503f3ee64454ee30949e4e">L3_mag</a> = sqrt(sixm.<a class="code" href="sixmotion_8h.html#aa3b9e00340b929765ee0905fb571cb61">L3_x</a> * sixm.<a class="code" href="sixmotion_8h.html#aa3b9e00340b929765ee0905fb571cb61">L3_x</a> + sixm.<a class="code" href="sixmotion_8h.html#a29c9d52145269baf6711fcea2b935f6f">L3_y</a> * sixm.<a class="code" href="sixmotion_8h.html#a29c9d52145269baf6711fcea2b935f6f">L3_y</a>);

    <span class="keywordflow">if</span> (sixm.<a class="code" href="sixmotion_8h.html#aab31a897c5503f3ee64454ee30949e4e">L3_mag</a> &gt; 128.0f)
        sixm.<a class="code" href="sixmotion_8h.html#aab31a897c5503f3ee64454ee30949e4e">L3_mag</a> = 128.0f;

    <span class="comment">//printf(&quot;%i\n&quot;,raw.BTN_L1_VALUE);</span>

    sixm.<a class="code" href="sixmotion_8h.html#a5a913a2d604994dd7ba60565ea83b10d">R3_x</a> = -128.0f + (float) raw.<a class="code" href="sixmotion_8h.html#a2f3f451e37369655d3f3c6d87a6b6fc0">R3_x</a>;
    sixm.<a class="code" href="sixmotion_8h.html#a6b2f6ca820b3976c91aeebbd67153c11">R3_y</a> = 128.0f - (<span class="keywordtype">float</span>) raw.<a class="code" href="sixmotion_8h.html#aa39a54e118b49d6415ab5ff3e161a92b">R3_y</a>;
    sixm.<a class="code" href="sixmotion_8h.html#ac728cf560de5592b14cc0ef208468d06">R3_mag</a> = sqrt(sixm.<a class="code" href="sixmotion_8h.html#a5a913a2d604994dd7ba60565ea83b10d">R3_x</a> * sixm.<a class="code" href="sixmotion_8h.html#a5a913a2d604994dd7ba60565ea83b10d">R3_x</a> + sixm.<a class="code" href="sixmotion_8h.html#a6b2f6ca820b3976c91aeebbd67153c11">R3_y</a> * sixm.<a class="code" href="sixmotion_8h.html#a6b2f6ca820b3976c91aeebbd67153c11">R3_y</a>);


    <span class="keywordflow">if</span> (sixm.<a class="code" href="sixmotion_8h.html#ac728cf560de5592b14cc0ef208468d06">R3_mag</a> &gt; 128.0f)
        sixm.<a class="code" href="sixmotion_8h.html#ac728cf560de5592b14cc0ef208468d06">R3_mag</a> = 128.0f;



    uint16_t ax, ay, az, gz;


    <a class="code" href="sixmotion_8cpp.html#a6da3937db21f72a0fa8f99e986ada1ab">be_memcpy</a>(&amp;ax, raw.<a class="code" href="sixmotion_8h.html#a1e256528d48dd5cfc3c45a757003d048">ax</a>, 2);
    <a class="code" href="sixmotion_8cpp.html#a6da3937db21f72a0fa8f99e986ada1ab">be_memcpy</a>(&amp;ay, raw.<a class="code" href="sixmotion_8h.html#a2fd716b5368476ba73e7ac2b231982d9">ay</a>, 2);
    <a class="code" href="sixmotion_8cpp.html#a6da3937db21f72a0fa8f99e986ada1ab">be_memcpy</a>(&amp;az, raw.<a class="code" href="sixmotion_8h.html#adac61d16af3f56135b3144b7245631ea">az</a>, 2);
    <a class="code" href="sixmotion_8cpp.html#a6da3937db21f72a0fa8f99e986ada1ab">be_memcpy</a>(&amp;gz, raw.<a class="code" href="sixmotion_8h.html#a1e0966ca7b33d0a41361f77db6a5f28f">gz</a>, 2);

    sixm.<a class="code" href="sixmotion_8h.html#a2da4e0a4e0ed832ca786a0b38726c833">aX</a> = ax - 512;
    sixm.<a class="code" href="sixmotion_8h.html#ac18c9666b02f3a4806470ad039ab7100">aY</a> = ay - 512;
    sixm.<a class="code" href="sixmotion_8h.html#a32d49e328c98ec918524f6d1f8c6929e">aZ</a> = az - 512 - 100;
    sixm.<a class="code" href="sixmotion_8h.html#a342b4c5ebd6c00f3f04ed8765fa4676e">gZ</a> = gz - 512;

    <span class="comment">//printf(&quot;%f %f\n&quot;,sixm.R3_x,sixm.R3_y);</span>

    <span class="comment">//printf(&quot;%i \n&quot;,ax);</span>

    <span class="comment">//sixm.aX = raw.ax1*256 + raw.ax2 - 512;</span>
    <span class="comment">//sixm.aY = raw.ay1*256 + raw.ay2 - 512;</span>
    <span class="comment">//sixm.aZ = raw.az1*256 + raw.az2 - 512;</span>
    <span class="comment">//sixm.gZ = raw.gz1*256 + raw.gz2 - 512;</span>

    <span class="comment">//printf(&quot;%f %f %f %f\n&quot;,sixm.aX,sixm.aY,sixm.aZ,sixm.gZ);</span>

    <span class="comment">//sqrt(sixm.aX*sixm.aX+sixm.aY*sixm.aY+sixm.aZ+sixm.aZ);</span>


    <span class="comment">//printf(&quot;%f %f %f %f\n&quot;,sixm.aX,sixm.aY,sixm.aZ);</span>
    <span class="comment">//printf(&quot;%f\n&quot;,sqrt(sixm.aX*sixm.aX+sixm.aY*sixm.aY+sixm.aZ*sixm.aZ));</span>

    <span class="comment">//printf(&quot;%i %i\n&quot;,raw.gz1,raw.gz2);</span>

    <span class="comment">//printf(&quot;%i %i %i %i\n&quot;,raw.aX,raw.aY,raw.aZ,raw.gZ);</span>

}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sixmotion_8cpp_a2ad176b48e77001d4400a403baf9035d_cgraph.png" border="0" usemap="#sixmotion_8cpp_a2ad176b48e77001d4400a403baf9035d_cgraph" alt=""/></div>
<map name="sixmotion_8cpp_a2ad176b48e77001d4400a403baf9035d_cgraph" id="sixmotion_8cpp_a2ad176b48e77001d4400a403baf9035d_cgraph">
<area shape="rect" id="node3" href="sixmotion_8cpp.html#a6da3937db21f72a0fa8f99e986ada1ab" title="be_memcpy" alt="" coords="136,5,229,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sixmotion_8cpp_a2ad176b48e77001d4400a403baf9035d_icgraph.png" border="0" usemap="#sixmotion_8cpp_a2ad176b48e77001d4400a403baf9035d_icgraph" alt=""/></div>
<map name="sixmotion_8cpp_a2ad176b48e77001d4400a403baf9035d_icgraph" id="sixmotion_8cpp_a2ad176b48e77001d4400a403baf9035d_icgraph">
<area shape="rect" id="node3" href="classsixmotion.html#a1e7228e96e52638bf794a12cc323ca16" title="sixmotion::readEv" alt="" coords="137,5,263,35"/><area shape="rect" id="node5" href="classsixmotion.html#a48ededdf89bcc3dc4c3ae03db34a14bc" title="sixmotion::loop" alt="" coords="313,5,423,35"/><area shape="rect" id="node7" href="classsixmotion.html#a2346d9e25b866fa40e60d897be1f5cba" title="sixmotion::sixmotion" alt="" coords="473,5,615,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a97e99c754a15c170af9554c0022860a3"></a><!-- doxytag: member="sixmotion.cpp::setup_device" ref="a97e99c754a15c170af9554c0022860a3" args="(struct motion_dev *dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="sixmotion_8cpp.html#a97e99c754a15c170af9554c0022860a3">setup_device</a> </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="sixmotion_8h.html#structmotion__dev">motion_dev</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sixmotion_8cpp_source.html#l00088">88</a> of file <a class="el" href="sixmotion_8cpp_source.html">sixmotion.cpp</a>.</p>

<p>References <a class="el" href="sixmotion_8h_source.html#l00140">motion_dev::csk</a>, <a class="el" href="sixmotion_8h_source.html#l00030">DS3</a>, <a class="el" href="sixmotion_8h_source.html#l00026">HIDP_DATA_RTYPE_FEATURE</a>, <a class="el" href="sixmotion_8h_source.html#l00025">HIDP_DATA_RTYPE_OUTPUT</a>, <a class="el" href="sixmotion_8cpp_source.html#l00079">hidp_trans()</a>, <a class="el" href="sixmotion_8h_source.html#l00023">HIDP_TRANS_SET_REPORT</a>, <a class="el" href="sixmotion_8h_source.html#l00136">motion_dev::index</a>, <a class="el" href="sixmotion_8h_source.html#l00141">motion_dev::isk</a>, <a class="el" href="sixmotion_8cpp.html#ad162a18cbea44b0c9ec3850c8d019bd2">LED_PERMANENT</a>, <a class="el" href="sixmotion_8h_source.html#l00029">SIXAXIS</a>, and <a class="el" href="sixmotion_8h_source.html#l00139">motion_dev::type</a>.</p>

<p>Referenced by <a class="el" href="sixmotion_8cpp_source.html#l00235">sixmotion::readEv()</a>.</p>
<div class="fragment"><pre class="fragment">                                          {

    <span class="keywordflow">switch</span> (dev-&gt;<a class="code" href="sixmotion_8h.html#ae34d0afad57067fc41f8b028e9f08afd">type</a>) {
        <span class="keywordflow">case</span> <a class="code" href="sixmotion_8h.html#aee4ee20b1b302b459839f2b7df3e9ab4">SIXAXIS</a>:
        <span class="keywordflow">case</span> <a class="code" href="sixmotion_8h.html#abb2543c6b8c507a9034ce65b83a7f464">DS3</a>:
        {

            <span class="keywordtype">char</span> set03f4[] = {<a class="code" href="sixmotion_8h.html#a7989d80a2863678bab153a1e65a1c3ef">HIDP_TRANS_SET_REPORT</a> | <a class="code" href="sixmotion_8h.html#a9a7c854bdf42f123baf1fe722600eda3">HIDP_DATA_RTYPE_FEATURE</a>, 0xf4,
                0x42, 0x03, 0x00, 0x00};

            <a class="code" href="sixmotion_8cpp.html#a2c84a0aa7176a9dba9a18091317d95fb">hidp_trans</a>(dev-&gt;<a class="code" href="sixmotion_8h.html#a01f12eac017c636823d82936d2c5f4e2">csk</a>, dev-&gt;<a class="code" href="sixmotion_8h.html#acf007a9789b940bc8998ffda607429d6">isk</a>, set03f4, sizeof (set03f4));

            <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> ledmask[10] = {1, 2, 4, 8, 6, 7, 11, 13, 14, 15};
<span class="preprocessor">#define LED_PERMANENT 0xff, 0x27, 0x10, 0x00, 0x32</span>
<span class="preprocessor"></span>            <span class="keywordtype">char</span> set0201[] = {
                <a class="code" href="sixmotion_8h.html#a7989d80a2863678bab153a1e65a1c3ef">HIDP_TRANS_SET_REPORT</a> | <a class="code" href="sixmotion_8h.html#a8a212a6ca5d1c355b9d955faa361ec6a">HIDP_DATA_RTYPE_OUTPUT</a>, 0x01,
                0x00, 0x00, 0x00, 0, 0, 0x00, 0x00, 0x00,
                0x00, ledmask[dev-&gt;<a class="code" href="sixmotion_8h.html#aac5499c00f3d2d9eecdb1b5ed26f596a">index</a> % 10] &lt;&lt; 1,
                <a class="code" href="sixmotion_8cpp.html#ad162a18cbea44b0c9ec3850c8d019bd2">LED_PERMANENT</a>,
                LED_PERMANENT,
                LED_PERMANENT,
                LED_PERMANENT,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            };

            <span class="keywordtype">char</span> output_report[] = {
                0x52, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x70, 0x00, 0x00, 0x00,
                0xff, 0x27, 0x10, 0x00, 0x32,
                0xff, 0x27, 0x10, 0x00, 0x32,
                0xff, 0x27, 0x10, 0x00, 0x32,
                0xff, 0x27, 0x10, 0x00, 0x32,
                0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
            };


            <span class="keywordflow">if</span> (dev-&gt;<a class="code" href="sixmotion_8h.html#ae34d0afad57067fc41f8b028e9f08afd">type</a> == <a class="code" href="sixmotion_8h.html#aee4ee20b1b302b459839f2b7df3e9ab4">SIXAXIS</a>) {
                printf(<span class="stringliteral">&quot;six\n&quot;</span>);
            } <span class="keywordflow">else</span> {
                printf(<span class="stringliteral">&quot;ds3\n&quot;</span>);

            }
            printf(<span class="stringliteral">&quot;start trans\n&quot;</span>);
            printf(<span class="stringliteral">&quot;finish setup\n&quot;</span>);
            <span class="keywordflow">break</span>;
        }


    }

}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sixmotion_8cpp_a97e99c754a15c170af9554c0022860a3_cgraph.png" border="0" usemap="#sixmotion_8cpp_a97e99c754a15c170af9554c0022860a3_cgraph" alt=""/></div>
<map name="sixmotion_8cpp_a97e99c754a15c170af9554c0022860a3_cgraph" id="sixmotion_8cpp_a97e99c754a15c170af9554c0022860a3_cgraph">
<area shape="rect" id="node3" href="sixmotion_8cpp.html#a2c84a0aa7176a9dba9a18091317d95fb" title="hidp_trans" alt="" coords="152,5,235,35"/><area shape="rect" id="node5" href="sixmotion_8cpp.html#a51246b75ffb66b5c4754e519c2d5b017" title="fatal" alt="" coords="284,5,329,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sixmotion_8cpp_a97e99c754a15c170af9554c0022860a3_icgraph.png" border="0" usemap="#sixmotion_8cpp_a97e99c754a15c170af9554c0022860a3_icgraph" alt=""/></div>
<map name="sixmotion_8cpp_a97e99c754a15c170af9554c0022860a3_icgraph" id="sixmotion_8cpp_a97e99c754a15c170af9554c0022860a3_icgraph">
<area shape="rect" id="node3" href="classsixmotion.html#a1e7228e96e52638bf794a12cc323ca16" title="sixmotion::readEv" alt="" coords="153,5,279,35"/><area shape="rect" id="node5" href="classsixmotion.html#a48ededdf89bcc3dc4c3ae03db34a14bc" title="sixmotion::loop" alt="" coords="329,5,439,35"/><area shape="rect" id="node7" href="classsixmotion.html#a2346d9e25b866fa40e60d897be1f5cba" title="sixmotion::sixmotion" alt="" coords="489,5,631,35"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a3339f7bea98569e0c20c28e9d69e6f42"></a><!-- doxytag: member="sixmotion.cpp::force_ds3" ref="a3339f7bea98569e0c20c28e9d69e6f42" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="sixmotion_8cpp.html#a3339f7bea98569e0c20c28e9d69e6f42">force_ds3</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sixmotion_8cpp_source.html#l00011">11</a> of file <a class="el" href="sixmotion_8cpp_source.html">sixmotion.cpp</a>.</p>

<p>Referenced by <a class="el" href="sixmotion_8cpp_source.html#l00047">accept_device()</a>.</p>

</div>
</div>
<a class="anchor" id="a2079b5d79e8f77f6b0f0e11101d9b239"></a><!-- doxytag: member="sixmotion.cpp::force_sixaxis" ref="a2079b5d79e8f77f6b0f0e11101d9b239" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="sixmotion_8cpp.html#a2079b5d79e8f77f6b0f0e11101d9b239">force_sixaxis</a> = 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sixmotion_8cpp_source.html#l00010">10</a> of file <a class="el" href="sixmotion_8cpp_source.html">sixmotion.cpp</a>.</p>

<p>Referenced by <a class="el" href="sixmotion_8cpp_source.html#l00047">accept_device()</a>.</p>

</div>
</div>
<a class="anchor" id="a5207b66bcfd62cc1455434d400eac417"></a><!-- doxytag: member="sixmotion.cpp::nostdin" ref="a5207b66bcfd62cc1455434d400eac417" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="sixmotion_8cpp.html#a5207b66bcfd62cc1455434d400eac417">nostdin</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sixmotion_8cpp_source.html#l00013">13</a> of file <a class="el" href="sixmotion_8cpp_source.html">sixmotion.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa434daa60aff3350306abb5bda360060"></a><!-- doxytag: member="sixmotion.cpp::timestamp" ref="aa434daa60aff3350306abb5bda360060" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="sixmotion_8cpp.html#aa434daa60aff3350306abb5bda360060">timestamp</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="sixmotion_8cpp_source.html#l00012">12</a> of file <a class="el" href="sixmotion_8cpp_source.html">sixmotion.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Mon May 27 2013 13:06:09 for stag_doc by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
